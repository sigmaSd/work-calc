import { ListView, HorizontalBox, VerticalBox, Button, LineEdit, ScrollView } from "std-widgets.slint";

struct Client {
    name: string,
    honoraire: float,
}

export component App inherits Window {
    title: "Client Calculator";
    width: 600px;
    height: 600px;
    background: #f0f0f0;
    in-out property <[Client]> clients: [];
    callback addClient(string, string);
    callback removeClient(Client);
    pure callback calcTotal() -> string;
    pure callback startsWith(string, string) -> bool;

    VerticalLayout {
        padding: 20px;
        spacing: 20px;

        HorizontalLayout {
            spacing: 10px;
            height: 40px;

            name := LineEdit {
                width: 40%;
                placeholder-text: "Name";
            }

            honoraire := LineEdit {
                width: 40%;
                placeholder-text: "Honoraire";
            }

            Button {
                text: "Add";
                primary: true;
                clicked => {
                    root.addClient(name.text, honoraire.text);
                    name.text = "";
                    honoraire.text = "";
                }
            }
        }

        Text {
            text: root.calcTotal();
        }

        ListView {
            for client[i] in clients: VerticalLayout {
                Rectangle {
                    height: 60px;
                    border-radius: 5px;
                    background: startsWith(client.name, "c ") ? #e0e0e0 : #ffffff;

                    HorizontalLayout {
                        padding: 10px;
                        spacing: 10px;

                        Text {
                            width: 40%;
                            text: client.name;
                            font-size: 16px;
                            vertical-alignment: center;
                        }

                        Text {
                            width: 40%;
                            text: client.honoraire;
                            font-size: 16px;
                            vertical-alignment: center;
                        }

                        Button {
                            text: "Remove";
                            clicked => {
                                root.removeClient(client);
                            }
                        }
                    }
                }

                Rectangle {
                    height: 1px;
                    background: #e0e0e0;
                }
            }
        }
    }
}
